<div class="field">
    <div class="name"></div>
    <div class="value"><h3>Основные настройки</h3></div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}userName">Логин магазина</label>
    </div>
    <div class="value">
        <input id="{$prefix}userName" type="text" name="{$namespace}[userName]" value="{ifset($settings, 'userName', '')|escape}">
        <br>
        <span class="hint">Выдаётся при подключении к платёжному шлюзу, для тестового и рабочего режима используются разные учётные данные.</span>
    </div>
</div>
<div class="field">
    <div class="name">
        <label for="{$prefix}password">Пароль</label>
    </div>
    <div class="value">
        <input type="password" name="{$namespace}[password]" id="{$prefix}password" value="{ifset($settings, 'password', '')|escape}">
        <br>
        <span class="hint">Выдаётся при подключении к платёжному шлюзу, для тестового и рабочего режима используются разные учётные данные.</span>
    </div>
</div>

<div class="field hidden">
    <div class="name">
        <label for="{$prefix}currency_id">Валюта</label>
    </div>
    <div class="value">
        <select name="{$namespace}[currency_id]" autocomplete="off" id="{$prefix}currency_id" title="Валюта">
            {$currency_id = ifset($settings, 'currency_id', '')}
            {foreach $currencies as $currency}
                <option value="{$currency['value']}" {if $currency_id === {$currency['value']}}selected{/if}>{$currency['title']}</option>
            {/foreach}
        </select>
        <br>
        <span class="hint">Валюта, в которой будут выполняться платежи.</span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}TESTMODE">Тестовый режим</label>
    </div>
    <div class="value">
        <input id="{$prefix}TESTMODE" type="checkbox" name="{$namespace}[TESTMODE]" value="1" {if ifset($settings, 'TESTMODE', '')}checked{/if}>
        <br>
        <span class="hint">Использует тестовый шлюз 3dsec.sberbank.ru и отключает автоматическое перенаправление покупателя на страницу оплаты. <br> Для выполнения тестового платежа нужно перейти на сайт «Сбербанка» с помощью кнопки.</span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}without_certificate">Не проверять сертификат</label>
    </div>
    <div class="value">
        <input id="{$prefix}without_certificate" type="checkbox" name="{$namespace}[without_certificate]" value="1" {if ifset($settings, 'without_certificate', '')}checked{/if}>
        <br>
        <span class="hint">Включите для <em>временного</em> устранения проблем при оплате заказов, связанных с ошибками подключения к серверам «Сбербанка».</span>
        <br>
        <span class="hint">Выключите эту настройку <em>после установки <a href="https://www.gosuslugi.ru/tls">корневого сертификата Минцифры</a></em> на вашем хостинге.</span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}api_callbacks_enabled">Исправлять обновление статусов платежей</label>
    </div>
    <div class="value">
        <input id="{$prefix}api_callbacks_enabled" type="checkbox" name="{$namespace}[api_callbacks_enabled]" value="1" {if ifset($settings, 'api_callbacks_enabled', '')}checked{/if}>
        <br>
        <span class="hint">Включите, если у вас возникают проблемы при автоматическом обновлении статусов платежей и вы настроили получение callback-уведомлений от серверов банка.</span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}sessionTimeoutSecs">Продолжительность жизни заказа в часах</label>
    </div>
    <div class="value">
        <input id="{$prefix}sessionTimeoutSecs" type="text" name="{$namespace}[sessionTimeoutSecs]"
               value="{ifset($settings, 'sessionTimeoutSecs', '')}" placeholder="24">
        <br>
        <span class="hint">Заказ можно будет оплатить только в течение указанного времени.</span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}two_step">Двухстадийная оплата</label>
    </div>
    <div class="value">
        <input type="checkbox" class="js-sb-payment-two-step" name="{$namespace}[two_step]" id="{$prefix}two_step" value="1" {if ifset($settings, 'two_step', '')}checked{/if}>
        <br>
        <span class="hint">Включите, только если ваш договор предусматривает необходимость ручного подтверждения платежей.</span>
        <br>
        <span class="hint"><em>Этот способ обработки платежей недоступен, если включён режим «Кредит».</em></span>
    </div>
</div>

<div class="field">
    <div class="name">
        <label for="{$prefix}cancel">Отмена платежей</label>
    </div>
    <div class="value">
        <input type="checkbox" name="{$namespace}[cancel]" id="{$prefix}cancel" value="1" {if ifset($settings, 'cancel', '')}checked{/if}>
        <br>
        <span class="hint">Отмена платежей для двухстадийной оплаты должна поддерживаться приложением.</span>
    </div>
</div>
