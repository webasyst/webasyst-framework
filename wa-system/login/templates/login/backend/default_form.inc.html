<div class="wa-login-default-form">
    {if $bind_with_webasyst_contact}
    {include file="./webasyst_contact_info.inc.html"}
    {/if}
    <form action="" method="post">

        {foreach $fields|default:[] as $field_id => $params}
            {$renderer->renderField($field_id, $params)}
        {/foreach}

        {$renderer->renderCaptcha()}

        {$renderer->renderRememberMe()}

        <div class="field wa-buttons">
            <div class="value wa-submit">

                {$renderer->renderMessages()}

                {$renderer->renderUncaughtErrors()}

                <input type="hidden" name="wa_auth_login" value="1">

                {if $bind_with_webasyst_contact}
                    <div class="wa-login-and-bind-with-webasyst-id-button-wrapper">
                        <input type="submit" value="[s`Sign in and connect Webasyst ID`]" class="button blue wa-login-submit">
                    </div>
                    <div>
                        <a href="javascript:void(0);" class="js-back-to-simple-login underline">[s`Sign in without Webasyst ID`]</a>
                    </div>
                {else}
                    <input type="submit" value="[s`Sign In`]" class="button wa-login-submit">
                    {if !empty($is_api_oauth)}
                        [s`or`]
                        <a href="javascript:void(0);" class="wa-login-cancel gray underline">[s`cancel`]</a>
                    {/if}
                    <i class="icon16 loading wa-loading" style="display: none;"></i>

                    {if $forgotpassword_url && empty($is_api_oauth)}
                        <a href="{$forgotpassword_url}" class="wa-forgotpassword underline" data-type="forgotpassword">[s`Forgot password?`]</a>
                    {/if}
                {/if}

            </div>
        </div>

        {$renderer->renderCsrf()}

    </form>
</div>
{if $webasyst_id_auth_url && !$bind_with_webasyst_contact}
<div class="waid-login">
    <span class="separator">[s`or`]</span>
    <a href="{$webasyst_id_auth_url}" class="waid-auth-link js-webasyst-auth-link">[s`Sign in with`]&nbsp;<span class="wa-logo-web">web</span><span class="wa-logo-a">a</span><span class="wa-logo-s1">s</span><span class="wa-logo-y">y</span><span class="wa-logo-s2">s</span><span class="wa-logo-t">t</span></a>
    <a href="#" class="hint js-waid-hint">[s`What is it?`]</a>
    {if !empty($webasyst_ID_auth_error)}
        <span class="error" data-code="{$webasyst_ID_auth_error.code|default:''}">
            {$webasyst_ID_auth_error.message|default:_w('Unknown auth error. Sign in with login and password.')}
        </span>
    {/if}
</div>
{/if}
