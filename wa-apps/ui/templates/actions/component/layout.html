{$_title = "Структура приложения и адаптивность"}
{$wa->title($_title)}

<h1>{$_title}</h1>

<p class="large">Бекенд любого приложения <strong>всегда занимает 100% ширины браузера</strong>. Бекенд — не лендинг, поэтому в его интерфейсе нет какой-то жесткой сетки или <span class="nowrap">breakpoint-ов</span> в зависимости от ширины экрана.</p>

<h3>Десктопы, планшеты, телефоны</h3>

<p><code>wa-2.0.css</code> создан для удобной работы на всех современных типах устройств — десктопах, планшетах, телефонах.</p>
<p>Но важно подчеркнуть: использование wa-2.0.css не означает разработку по принципу «mobile first». Десктопы (по крайней мере, в 2020–2021 годах) являются самым популярным типом устройств для работы с приложениями Webasyst, поэтому wa-2.0.css ориентирован в первую очередь на создание интерфейсов именно для них. Планшеты очень похожи на десктоп, только оптимизированы для управления пальцами, а не курсором. На телефонах используется адаптированное поведение некоторых навигационных блоков: что-то скрывается и появляется по дополнительному нажатию на кнопку навигации, где-то появляется таббар и т. д. Все это реализуется с помощью CSS media queries и минимального количества кода на JavaScript.</p>

<h3>CSS breakpoints</h3>

<p>В CSS разделение типов устройств основано на максимальной ширине экрана по горизонтали (по ширине) с помощью CSS media queries:</p>
<ul>
    <li><b>mobile</b> (телефоны): не более 760 пикселей,</li>
    <li><b>tablet</b> (планшеты): от 761 пикселя до 1024 пикселей,</li>
    <li><b>desktop</b> (десктопы): более 1025 пикселей.</li>
</ul>

<p>Предусмотрено несколько CSS-классов, скрывающих (<code>display: none;</code>) и показывающих (<code>display: block;</code>) отдельные элементы страницы в зависимости от типа устройства:</p>
<ul>
    <li><code>.hidden</code> — элемент скрыт на всех устройствах (<code>display: none</code>),</li>
    <li><code>.mobile-only</code> — виден только на телефонах (<code>display: block</code> при ширине экрана <= 760px),</li>
    <li><code>.tablet-only</code> — только на планшетах (<code>display: block</code> при ширине экрана от 761px до 1024px),</li>
    <li><code>.desktop-only</code> — только на десктопах (<code>display: block</code> при ширине экрана >= 1025px),</li>
    <li><code>.desktop-and-tablet-only</code> — на планшетах и десктопах, но не на телефонах.</li>
</ul>

<h3>isMobile()</h3>

<p>На сервере тип устройства можно определить с помощью хелпера <code>&#123;$wa->isMobile()&#125;</code>. Он работает на основе информации о User Agent и хотя и не позволяет точно определить параметры устройства, в подавляющем большинстве случаев правильно определит его тип, что может быть полезно при адаптации интерфейса на уровне серверного шаблона или лейаута.</p>
<ul>
    <li>Текущее значение <code>&#123;$wa->isMobile()&#125; = '<strong>{$wa->isMobile()}</strong>'</code>,</li>
</ul>

<h3>Разные лейауты в зависимости от типа устройства</h3>

<p>Пожалуй, самый рекомендуемый вариант адаптации сложного приложения для нескольких типов устройств — это замена единого шаблона лейаута <code>Default.html</code> двумя разными: <code><b>Desktop.html</b></code> и <code><b>Mobile.html</b></code> и подключение нужного в зависимости от значения, возвращаемого методом <b><code>isMobile()</code></b>.</p>
<pre class="prettyprint">
class fooBackendController extends waViewController
{
    public function execute()
    {
        if ($this->getRequest()->isMobile()) {
            $layout = new fooMobileLayout();
        } else {
            $layout = new fooDefaultLayout();
        }
        $this->setLayout($layout);
    }
}
</pre>

<script>
    $.wa_ui.title.set({$_title|json_encode});

    if (typeof prettyPrint != 'undefined' && $.isFunction(prettyPrint)) {
        prettyPrint();
    }
</script>
