(function(a){function c(b){var c=a(window),d=c.scrollTop(),e=c.scrollLeft()+c.width(),h=c.scrollTop()+c.height(),c=c.scrollLeft(),j=b.element.offset();j.right=j.left+b.element.outerWidth();j.bottom=j.top+b.element.outerHeight();return d<=j.top&&c<=j.left&&e>=j.right&&h>=j.bottom}function b(b,c){return b.clone().addClass(c.fixed_class||"sticky-fixed").css(a.extend({position:"fixed",display:"none"},c.fixed_css||{})).removeAttr("id").insertAfter(b)}a.fn.sticky=function(g){function f(){d.closest("body").length?
a.each(h,function(a,b){e.isStaticVisible.call(b.element,b,e)?b.is_fixed&&(b.is_fixed=!1,b.fixed_clone.hide(),e.hideFixed&&e.hideFixed.call(b.fixed_clone,b,e)):(b.is_fixed||(b.is_fixed=!0,b.fixed_clone.show(),e.showFixed&&e.showFixed.call(b.fixed_clone,b,e)),e.updateFixed&&e.updateFixed.call(b.fixed_clone,b,e))}):a(window).off("resize scroll",f)}var d=this,e=a.extend({fixed_css:{bottom:0},fixed_class:"sticky-fixed",isStaticVisible:c,getClone:b,showFixed:function(a){a.element.css({"min-height":a.element.height()});
a.fixed_clone.empty().append(a.element.children())},hideFixed:function(a){a.element.css({"min-height":0});a.fixed_clone.children().appendTo(a.element)},updateFixed:function(a){a.fixed_clone.css({"min-width":a.element.width()})}},g||{}),h=d.map(function(){var b=a(this);return{element:b,fixed_clone:e.getClone.call(b,b,e),is_fixed:!1}}).get();a(window).on("resize scroll",f);f();return this}})(jQuery);(function(a){var c=2,b=window,g=a(b),f=!1,d={url:"",target:".b-stream",count:10,scroll:null,times:null,stop:null,bottom_distance:80,content_distance:120,auto:!0,beforeLoad:null,afterLoad:null,renderContent:null,paging_selector:null,pageless_wrapper:null};d.times=parseInt(d.times,10);var e=function(){var b=d.pageless_wrapper;b.show();d.paging_selector&&a(d.paging_selector).hide();b.find("a.pageless-link").live("click",function(){isNaN(d.times)||(d.times=Math.max(d.times+1,1));i(!0);return!1});g.bind("scroll.pageless resize.pageless",
i).trigger("scroll.pageless")},h=function(){g.unbind(".pageless");d.stop&&"function"==typeof d.stop&&d.stop.apply(this,[])},j=function(){var b=d.pageless_wrapper,g=b.find(".pageless-link"),e=b.find(".pageless-progress");isNaN(d.times)||0<d.times?(e.length?(g.hide(),e.show()):g.replaceWith('<i class="icon16 loading"></i>'+g.text()),f=!0,"function"===typeof d.beforeLoad&&d.beforeLoad(),a.get(d.url,{page:c++},function(c){var g=c.data?c.data.content:c;typeof d.prepareContent==="function"&&(g=d.prepareContent(g));
if(typeof d.renderContent==="function")d.renderContent(g,a(d.target));else{b.remove();a(d.target).append(g);b=d.pageless_wrapper=a(d.target+" .pageless-wrapper")}d.scroll&&typeof d.scroll=="function"&&d.scroll.apply(this,[c,d.target]);f=false;typeof d.afterLoad==="function"&&d.afterLoad();i()})):(g.show(),e.hide(),f=!1);d.times-=1},i=function(e){if(c>=parseInt(d.count)+1)h.apply(this,[]);else if(!f){var i=!1;if(!0===e)i=!0;else if(d.auto){if(!(e=(b===window?a(document).height()-g.scrollTop()-g.height():
g[0].scrollHeight-g.scrollTop()-g.height())<d.bottom_distance))e=d.pageless_wrapper,e=e.length?a(window).height()-e.position().top+g.scrollTop():0,e=e>d.content_distance;i=e}i&&j.apply(this,[])}};a.pageless=function(b,c){("start"==b||"refresh"==b)&&e.apply(this,[]);"url"==b&&(d.url=c);a.isPlainObject(b)&&(a.extend(d,b),null===d.pageless_wrapper?d.pageless_wrapper=a(d.target+" .pageless-wrapper"):!1===d.pageless_wrapper&&(d.pageless_wrapper=a()),e.apply(this,[]))}})(jQuery);$.storage=new $.store;$.wa_blog_options=$.wa_blog_options||{};
$.wa_blog=$.extend(!0,$.wa_blog,{rights:{admin:!1},common:{options:{},parent:null,init_stack:{},init:function(a){var c=this;this.parent=$.wa_blog;this.options=$.extend(this.options,a);$(document).ready(function(){c.onDomReady(c.parent)})},onDomReady:function(a){a=a||$.wa_blog;$(window).scrollTop(0);for(var c in a)if(c!="common"&&a[c].init&&typeof a[c].init=="function")try{a[c].init($.wa_blog_options[c]||{})}catch(b){typeof console=="object"&&console.log(b)}},ajaxInit:function(a){var a=a||$.wa_blog,
c=[];$(window).scrollTop(0);for(var b in a)try{if(b!="common"&&a[b].ajaxInit&&typeof a[b].ajaxInit=="function"&&!this.init_stack[b]){a[b].ajaxInit();this.init_stack[b]=true;c[b]=true}}catch(g){c[b]=false;typeof console=="object"&&console.log(g)}return c},ajaxPurge:function(a){if(this.init_stack[a]){if($.wa_blog[a]){try{$.wa_blog[a].ajaxPurge&&typeof $.wa_blog[a].ajaxPurge=="function"&&$.wa_blog[a].ajaxPurge()}catch(c){typeof console=="object"&&console.log(c)}$.wa_blog[a]={}}this.init_stack[a]=null}},
onContentUpdate:function(){var a=this.parent,c;for(c in a)if(c!="common"&&a[c].onContentUpdate&&typeof a[c].onContentUpdate=="function")try{a[c].onContentUpdate()}catch(b){typeof console=="object"&&console.log(b)}}},plugins:{},dialogs:{pull:{},init:function(){$(".dialog-confirm").live("click",this.confirm);$(".js-confirm").live("click",this.jsConfirm)},close:function(a){$.wa_blog.dialogs.pull[a]&&$.wa_blog.dialogs.pull[a].trigger("close")},confirm:function(){var a=$(this).attr("id").replace(/-.*$/,
"");$.wa_blog.dialogs.pull[a]=$("#"+a+"-dialog").waDialog({disableButtonsOnSubmit:true,onSubmit:function(){return false}});return false},jsConfirm:function(){var a=$(this).attr("title")||"Are you sure?";if(!confirm(a))return false}},sidebar:{options:{key:"blog/collapsible/"},init:function(){var a=this;$(".menu-collapsible .collapse-handler").each(function(){a.restore(this);$(this).click(function(){return a.toggle(this)})});var c=function(){var a=$(this).data("contact-id");if(a){$("#blog-drafts li[data-contact-id!="+
a+"]").hide();$.storage.set("blog/my-drafts",1);g.show();f.hide();f.closest(".block").find(".title").hide().filter(".b-my-drafts").show()}else{$("#blog-drafts li").show();$.storage.del("blog/my-drafts");f.show();g.hide();g.closest(".block").find(".title").hide().filter(".b-all-drafts").show()}return false},b=function(){var a=$(this).find("i"),b=$.storage.get("blog/my-drafts");if(a.hasClass("rarr")){f.hide();g.hide();a=$(this).closest(".block");if(b){a.find(".counter").hide().filter(".b-my-drafts").show();
a.find(".title").hide().filter(".b-my-drafts").show()}else{a.find(".counter").hide().filter(".b-all-drafts").show();a.find(".title").hide().filter(".b-all-drafts").show()}}else b?c.apply(f.find("a").get(0)):c.apply(g.find("a").get(0))},g=$("#b-all-drafts"),f=$("#b-my-drafts");f.length||$.storage.del("blog/my-drafts");var d=$("#blog-drafts").closest(".block").find(".collapse-handler");d.click(b);b.apply(d.get(0));g.find("a").click(c);f.find("a").click(c)},toggle:function(a){$(a).find(".rarr").length?
this.show(a):$(this).find(".darr")&&this.hide(a);return false},show:function(a){var a=$(a),c=a.parent().find("ul.collapsible");c.show();c.attr("id")=="blog-drafts"&&a.find(".count").hide();a.find(".rarr").removeClass("rarr").addClass("darr");$.storage.set(this.options.key+c.attr("id"),null)},hide:function(a){var a=$(a),c=a.parent().find("ul.collapsible");c.attr("id")=="blog-drafts"&&a.find(".count").show();c.hide();a.find(".darr").removeClass("darr").addClass("rarr");$.storage.set(this.options.key+
c.attr("id"),2)},restore:function(a){var c=$(a).parent().find("ul.collapsible").attr("id");if(c)try{parseInt($.storage.get(this.options.key+c))==2&&this.hide(a)}catch(b){typeof console=="object"&&console.log(b)}}},helpers:{init:function(){this.compileTemplates()},compileTemplates:function(){var a=/<\\\/(\w+)/g;$("script[type$='x-jquery-tmpl']").each(function(){var c=$(this).attr("id").replace(/-template-js$/,"");try{var b=$(this).html().replace(a,"</$1");$.template(c,b)}catch(g){typeof console=="object"&&
console.log(g)}})}}});$.wa_blog.common.init();(function(a){a.wa_blog.comments={options:{form_selector:"#b-comment-add-form",form_wrapper_selector:"#b-comment-add"},init:function(){this.parent=a.wa_blog;var c=this;a("a.b-comment-delete, a.b-comment-restore").live("click",function(a){return c.manageComment.apply(c,[this,a])});if(c.options.pageless){var b={scroll:function(){c.parent.common.onContentUpdate()},afterLoad:function(){var b={};a(this.target).children(":not(.pageless-wrapper)").each(function(){var c=a(this),d=c.children(".b-comment").data("comment-id");
d&&b[d]&&c.remove();b[d]=1})}},b=a.extend(!0,b,c.options.pageless);a.pageless(b)}c.parent.common.onContentUpdate();a(".b-comment-reply").live("click",c.replyClick);a(this.options.form_selector+" #send").click(c.formSubmit)},replyClick:function(){var c=a(this).parents(".b-comment"),b=c.length?parseInt(a(c).attr("id").replace(/^[\D]+/,"")):0;a.wa_blog.comments.formAdd(a(this).parent(),b);a(c).parents(".b-comments").find(".b-comment-reply:hidden").show();a(c).find(".b-comment-reply:visible").hide();
return!1},formSubmit:function(){var c=a(this);c.attr("disabled",!0);var b=c.parent().find(".b-comment-add-form-status");b.show();var g=a("ul#b-comment-add"),f=a(a.wa_blog.comments.options.form_selector);a.post(f.attr("action"),f.serialize(),function(d){c.attr("disabled",!1);b.hide();if(d.status&&"ok"==d.status&&d.data){var e=d.data.count_str,d=a(d.data.template).find(".b-comment"),f=null;g.prev().is(".b-form-home")?f=g.prev().prev():(f=g.parent(),f.children("ul.menu-v").not(g).size()||(f=f.append('<ul class="menu-v with-icons"></ul>').find("ul").not(g)));
f.append(a("<li />").append(d));a.wa_blog.comments.formAdd(".b-form-home",0);a(".comment-count").each(function(){a(this).text(parseInt(a(this).text())+1)});a(".b-not-comment").remove();a(".b-comment-count").show().html(e);d.trigger("plugin.comment_add");a.wa_blog.comments.formRefresh(!0)}else d.status&&"fail"==d.status?(a.wa_blog.comments.formRefresh(),a(d.errors).each(function(){var b=this;for(name in b){var c=a(a.wa_blog.comments.options.form_selector).find("[name="+name+"]"),b=a('<div class="hint errormsg"></div>').text(b[name]);
c.after(b).addClass("error")}})):a.wa_blog.comments.formRefresh()},"json");return!1},formRefresh:function(c){var b=a(a.wa_blog.comments.options.form_selector);b.parents(".b-comments").find(".b-comment-reply:hidden").show();b.find(".errormsg").remove();b.find(".error").removeClass("error");c&&b.find("textarea").val("")},formAdd:function(c,b){this.formRefresh(!1);0==a(c).size()?a(a.wa_blog.comments.options.form_wrapper_selector).hide():(a(a.wa_blog.comments.options.form_wrapper_selector).show().insertAfter(c).find("[name=text]").val(""),
a(a.wa_blog.comments.options.form_wrapper_selector).find("input[name=parent]").val(b))},manageComment:function(c){var b=a(c).hasClass("b-comment-restore")?"approved":"deleted",g=a(c).parents(".b-comment"),f=parseInt(a(g).attr("id").replace(/^[\D]+/,"")),d=this;a(c).hide().after('<i class="b-ajax-status-loading icon16 loading"></i>');a.ajax({url:"?module=comments&action=edit",type:"POST",data:{status:b,id:f},success:function(b){if("ok"==b.data.status&&b.data.changed){var c="deleted"==b.data.status?
-1:1;a(".comment-count").each(function(){a(this).text(parseInt(a(this).text())+c)})}g.find("i.icon16.loading").remove();var j=null;b&&(b.data&&b.data.count_str)&&(j=b.data.count_str);d.setCommentStatus(f,b.data.status,j)},error:function(){g.find("i.icon16.loading").remove();d.setCommentStatus(f,"approved"==b?"approved":"deleted",null)},dataType:"json"});return!1},setCommentStatus:function(c,b,g){c=a("#b-comment-"+c);"deleted"==b?(c.addClass("b-deleted"),c.find(".b-comment-delete").hide(),c.find(".b-comment-restore").show(),
a.wa_blog.common.onContentUpdate()):"approved"==b&&(c.removeClass("b-deleted"),c.find(".b-comment-delete").show(),c.find(".b-comment-restore").hide(),a.wa_blog.common.onContentUpdate());null!==g&&a(".b-comment-count").show().html(g)}}})(jQuery);$.wa_blog.plugins={options:{plugins:{}},list:null,hash:null,js:{},container:null,init:function(){var a=this;a.container=$("#blog-ajax-settings-container");a.list=$("#plugin-list").sortable({containment:"parent",distance:5,tolerance:"pointer",update:a.sortHandler});"undefined"!=typeof $.History&&$.History.bind(function(){a.dispatch()});var c=window.location.hash;"#/"===c||!c?(c=$.storage.get("blog/plugins/hash"))&&null!=c?$.wa.setHash("#/"+c):this.dispatch():$.wa.setHash(c)},sortHandler:function(a,
c){$.ajax({type:"POST",url:"?module=plugins&action=sort",data:{slug:$(c.item).attr("id").replace(/^plugin-/,""),pos:$(c.item).index()},success:function(a){(!a||!a.status||"ok"!=a.status||!a.data||"ok"!=a.data)&&self.list.sortable("cancel")},error:function(){self.list.sortable("cancel")}})},dispatch:function(a){$.wa_blog.plugins.hash="";void 0==a&&(a=window.location.hash);if(a=a.replace(/^[^#]*#\/*/,""))if(a=a.split("/"),a[0]){for(var c="",b=a.length,g=0;g<a.length;g++){var f=a[g];if(2>g)if(0===g)c=
f;else if(parseInt(f,10)!=f&&-1==f.indexOf("="))c+=f.substr(0,1).toUpperCase()+f.substr(1);else{b=g;break}else{b=g;break}}b=a.slice(b);4<=a.length&&($.wa_blog.plugins.hash=a.slice(0,2).join("/"));this.preAnyAction(c,b);this[c+"Action"]?(this[c+"Action"].apply(this,b),$.storage.set("blog/plugins/hash",a.join("/"))):console&&console.log("Invalid action name:",c+"Action")}else this.preAnyAction(),this.defaultAction();else this.preAnyAction(),this.defaultAction()},preAnyAction:function(){},settingsGenericAction:function(a){this.options.plugins[a]?
this.load("?module=plugins&action=settings&slug="+a,a):this.defaultAction()},settingsCustomAction:function(a){this.options.plugins[a]?this.load("?plugin="+a+"&action=settings",a):this.defaultAction()},select:function(a){$("#plugin-list li.selected").removeClass("selected");$("#plugin-list li#plugin-"+a).addClass("selected")},defaultAction:function(){$.storage.del("blog/plugins/hash");$.wa.setHash("#/")},directLoad:function(a){this.container.empty();this.container.html(a)},load:function(a,c){var b=
this;for(id in b.js)$.wa_blog.common.ajaxPurge(id);b.container.load(a,function(){b.select(c);b.js=$.wa_blog.common.ajaxInit()})}};(function(a){function c(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");"object"==typeof window.console&&window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function g(){function d(){var b=i.attr("target"),c=i.attr("action");f.setAttribute("target",j);"POST"!=f.getAttribute("method")&&f.setAttribute("method","POST");f.getAttribute("action")!=e.url&&f.setAttribute("action",
e.url);e.skipEncodingOverride||i.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){n=!0;g()},e.timeout);var k=[];try{if(e.extraData)for(var m in e.extraData)k.push(a('<input type="hidden" name="'+m+'" value="'+e.extraData[m]+'" />').appendTo(f)[0]);h.appendTo("body");l.attachEvent?l.attachEvent("onload",g):l.addEventListener("load",g,!1);f.submit()}finally{f.setAttribute("action",c),b?f.setAttribute("target",b):i.removeAttr("target"),a(k).remove()}}
function g(){if(!k.aborted){var b=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document;if(b&&b.location.href!=e.iframeSrc||n){l.detachEvent?l.detachEvent("onload",g):l.removeEventListener("load",g,!1);var d=!0;try{if(n)throw"timeout";var f="xml"==e.dataType||b.XMLDocument||a.isXMLDoc(b);c("isXml="+f);if(!f&&(window.opera&&(null==b.body||""==b.body.innerHTML))&&--w){c("requeing onLoad callback, DOM not available");setTimeout(g,250);return}k.responseText=b.body?b.body.innerHTML:
b.documentElement?b.documentElement.innerHTML:null;k.responseXML=b.XMLDocument?b.XMLDocument:b;k.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};var j=/(json|script)/.test(e.dataType);if(j||e.textarea){var i=b.getElementsByTagName("textarea")[0];if(i)k.responseText=i.value;else if(j){var p=b.getElementsByTagName("pre")[0],r=b.getElementsByTagName("body")[0];p?k.responseText=p.textContent:r&&(k.responseText=r.innerHTML)}}else"xml"==e.dataType&&(!k.responseXML&&null!=k.responseText)&&
(k.responseXML=x(k.responseText));var b=k,q=e.dataType,f=e,t=b.getResponseHeader("content-type")||"",u="xml"===q||!q&&0<=t.indexOf("xml"),o=u?b.responseXML:b.responseText;u&&"parsererror"===o.documentElement.nodeName&&a.error&&a.error("parsererror");f&&f.dataFilter&&(o=f.dataFilter(o,q));"string"===typeof o&&("json"===q||!q&&0<=t.indexOf("json")?o=y(o):("script"===q||!q&&0<=t.indexOf("javascript"))&&a.globalEval(o));v=o}catch(s){c("error caught:",s),d=!1,k.error=s,e.error&&e.error.call(e.context,
k,"error",s),m&&a.event.trigger("ajaxError",[k,e,s])}k.aborted&&(c("upload aborted"),d=!1);d&&(e.success&&e.success.call(e.context,v,"success",k),m&&a.event.trigger("ajaxSuccess",[k,e]));m&&a.event.trigger("ajaxComplete",[k,e]);m&&!--a.active&&a.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,k,d?"success":"error");setTimeout(function(){h.removeData("form-plugin-onload");h.remove();k.responseXML=null},100)}}}var f=i[0];if(a(":input[name=submit],:input[id=submit]",f).length)alert('Error: Form elements must not have name or id of "submit".');
else{var e=a.extend(!0,{},a.ajaxSettings,b);e.context=e.context||e;var j="jqFormIO"+(new Date).getTime(),h=a('<iframe id="'+j+'" name="'+j+'" src="'+e.iframeSrc+'" />'),l=h[0];h.css({position:"absolute",top:"-1000px",left:"-1000px"});var k={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){c("aborting upload...");this.aborted=1;h.attr("src",e.iframeSrc);k.error="aborted";
e.error&&e.error.call(e.context,k,"error","aborted");m&&a.event.trigger("ajaxError",[k,e,"aborted"]);e.complete&&e.complete.call(e.context,k,"error")}},m=e.global;m&&!a.active++&&a.event.trigger("ajaxStart");m&&a.event.trigger("ajaxSend",[k,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,k,e))e.global&&a.active--;else if(!k.aborted){var n=0,p=f.clk;if(p){var r=p.name;r&&!p.disabled&&(e.extraData=e.extraData||{},e.extraData[r]=p.value,"image"==p.type&&(e.extraData[r+".x"]=f.clk_x,e.extraData[r+
".y"]=f.clk_y))}e.forceSync?d():setTimeout(d,10);var v,w=50,x=a.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},y=a.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof b&&(b={success:b});var f=
this.attr("action");(f="string"===typeof f?a.trim(f):"")&&(f=(f.match(/^([^#]+)/)||[])[1]);f=f||window.location.href||"";b=a.extend(!0,{url:f,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);f={};this.trigger("form-pre-serialize",[this,b,f]);if(f.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return c("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var d,e,h=this.formToArray(b.semantic);if(b.data)for(d in b.extraData=b.data,b.data)if(b.data[d]instanceof Array)for(var j in b.data[d])h.push({name:d,value:b.data[d][j]});else e=b.data[d],e=a.isFunction(e)?e():e,h.push({name:d,value:e});if(b.beforeSubmit&&!1===b.beforeSubmit(h,this,b))return c("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[h,this,b,f]);if(f.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;d=a.param(h);
"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+d,b.data=null):b.data=d;var i=this,l=[];b.resetForm&&l.push(function(){i.resetForm()});b.clearForm&&l.push(function(){i.clearForm()});if(!b.dataType&&b.target){var n=b.success||function(){};l.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(n,arguments)})}else b.success&&l.push(b.success);b.success=function(a,c,d){for(var e=b.context||b,g=0,f=l.length;g<f;g++)l[g].apply(e,[a,c,d||i,i])};d=0<a("input:file",
this).length;j="multipart/form-data"==i.attr("enctype")||"multipart/form-data"==i.attr("encoding");!1!==b.iframe&&(d||b.iframe||j)?b.closeKeepAlive?a.get(b.closeKeepAlive,g):g():a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){if(0===this.length){var g=this.selector,f=this.context;if(!a.isReady&&g)return c("DOM not ready, queuing ajaxForm"),a(function(){a(g,f).ajaxForm(b)}),this;c("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(c){c.isDefaultPrevented()||(c.preventDefault(),a(this).ajaxSubmit(b))}).bind("click.form-plugin",function(b){var c=b.target,g=a(c);if(!g.is(":submit,input:image")){c=g.closest(":submit");if(0==c.length)return;c=c[0]}var f=this;f.clk=c;"image"==c.type&&(void 0!=b.offsetX?(f.clk_x=b.offsetX,f.clk_y=b.offsetY):"function"==typeof a.fn.offset?(g=g.offset(),f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top):(f.clk_x=b.pageX-c.offsetLeft,
f.clk_y=b.pageY-c.offsetTop));setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(0===this.length)return c;var f=this[0],d=b?f.getElementsByTagName("*"):f.elements;if(!d)return c;var e,h,j,i,l,n;e=0;for(l=d.length;e<l;e++)if(h=d[e],j=h.name)if(b&&f.clk&&"image"==h.type)!h.disabled&&f.clk==h&&(c.push({name:j,value:a(h).val()}),c.push({name:j+".x",value:f.clk_x},
{name:j+".y",value:f.clk_y}));else if((i=a.fieldValue(h,!0))&&i.constructor==Array){h=0;for(n=i.length;h<n;h++)c.push({name:j,value:i[h]})}else null!==i&&"undefined"!=typeof i&&c.push({name:j,value:i});if(!b&&f.clk&&(b=a(f.clk),d=b[0],(j=d.name)&&!d.disabled&&"image"==d.type))c.push({name:j,value:b.val()}),c.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y});return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var f=
this.name;if(f){var d=a.fieldValue(this,b);if(d&&d.constructor==Array)for(var e=0,h=d.length;e<h;e++)c.push({name:f,value:d[e]});else null!==d&&"undefined"!=typeof d&&c.push({name:this.name,value:d})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],f=0,d=this.length;f<d;f++){var e=a.fieldValue(this[f],b);null===e||("undefined"==typeof e||e.constructor==Array&&!e.length)||(e.constructor==Array?a.merge(c,e):c.push(e))}return c};a.fieldValue=function(b,c){var f=b.name,d=b.type,e=b.tagName.toLowerCase();
void 0===c&&(c=!0);if(c&&(!f||b.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!b.checked||("submit"==d||"image"==d)&&b.form&&b.form.clk!=b||"select"==e&&-1==b.selectedIndex))return null;if("select"==e){var h=b.selectedIndex;if(0>h)return null;for(var f=[],e=b.options,j=(d="select-one"==d)?h+1:e.length,h=d?h:0;h<j;h++){var i=e[h];if(i.selected){var l=i.value;l||(l=i.attributes&&i.attributes.value&&!i.attributes.value.specified?i.text:i.value);if(d)return l;f.push(l)}}return f}return a(b).val()};
a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,c=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==c?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(c=a(this).parent("select"),b&&(c[0]&&"select-one"==c[0].type)&&c.find("option").selected(!1),this.selected=b)})}})(jQuery);
