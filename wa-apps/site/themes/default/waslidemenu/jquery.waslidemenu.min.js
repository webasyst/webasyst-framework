/**
 * waSlideMenu - jQuery plugin for menu organization like Facebook Help Page.
 * @version v1.0.7
 * @link https://github.com/webasyst/waslidemenu
 * @license MIT
 */
!function(e,n){"use strict";e.waSlideMenu=function(t,o){var a="SlideMenu",i=this;i._addCssNamespace=function(n,t){var o={};return e.each(n,function(e,n){"string"==typeof n&&(o[e]=t+a+n)}),o},i._setup=function(){i.o=e.extend({},e.waSlideMenu.defaults,o),i.o.classNames=i._addCssNamespace(i.o.classNames,i.o.namespace),i.$waSlideMenu=e(t),i.$waSlideMenu.data(a,i),i.$backs=[],i.$items=i.$waSlideMenu.find(i.o.itemSelector),i.$waSlideMenu.addClass(i.o.classNames.navigationClass),i.$movable=e("<div/>",{"class":i.o.classNames.wrapperClass}),i.$inheritedMenus=i.$waSlideMenu.find(i.o.menuSelector),i.$rootMenu=e(i.$inheritedMenus.splice(0,1)),i.$rootMenu.addClass(i.o.classNames.allMenusClass).appendTo(i.$movable.prependTo(i.$waSlideMenu)),i.$inheritedMenus.addClass(i.o.classNames.allMenusClass+" "+i.o.classNames.inheritedMenuClass);var n=i.$items.prop("tagName");i.$inheritedMenus.each(function(t,o){var a=e(o).closest(i.o.itemSelector).children("a").attr("href"),l=e("<"+n+"/>",{"class":i.o.classNames.menuItemBackClass});i.o.backOnTop?l.prependTo(e(o)):l.appendTo(e(o)),i.$backs.push(l.append(e("<a>",{href:a}).html(i.o.backLinkContent)))}),i.o.minHeightMenu>0&&(i.o.minHeightMenu=i.o.minHeightMenu>i.$waSlideMenu.height()?i.o.minHeightMenu:i.$waSlideMenu.height(),i.$waSlideMenu.css("min-height",i.o.minHeightMenu)),i.o.previousHeight=0,i.o.nowSliding=!1},i.gotoSelected=function(e,n){i._hideOtherMenus(e,i._scrollToTop),i._heightFix(e),i._animateSlide(e,n)},i._animateSlide=function(e,n){var t=Math.abs(100*e),o=e>0?i.o.onSlideForward:i.o.onSlideBack;o&&"function"==typeof o&&o(i),n?(i.o.nowSliding=!0,i.$movable.animate({left:e>0?"-="+t+"%":"+="+t+"%"},i.o.slideSpeed,i.o.slideEasing,function(){i.o.nowSliding=!1,i._scrollToTop(e),i.o.afterSlide&&"function"==typeof i.o.afterSlide&&i.o.afterSlide(i)})):i.$movable.css("left","-"+t+"%")},i._scrollToTop=function(t){var o=i.$currentMenuElement.children(i.o.menuSelector),a=i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass)?!0:!1;if(i.o.scrollToTopSpeed&&(a||o.length>0)){var l=t>0?o.children(i.o.itemSelector).last():i.$currentMenuElement,s=t>0?l.closest(i.o.menuSelector):i.$currentMenuElement,r=l.offset().top,c=e(n).scrollTop();0>r-c&&e("html, body").animate({scrollTop:s.offset().top},i.o.scrollToTopSpeed)}},i._heightFix=function(e){if(i.o.autoHeightMenu){var n=0,t=0;e>0?(t=i.$currentMenuElement.offset().top-i.$waSlideMenu.offset().top+i.$currentMenuElement.outerHeight(),n=i.$currentMenuElement.children(i.o.menuSelector).height(),n=t>n?n=t:n):n=i.$currentMenuElement.closest(i.o.menuSelector).height(),0>e&&(n=n>i.o.previousHeight?n:i.o.previousHeight),n=n>i.o.minHeightMenu?n:i.o.minHeightMenu,i.o.previousHeight=n,i.$waSlideMenu.css("height",n)}},i._hideOtherMenus=function(e){var n=i.$currentMenuElement.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector);n.push(i.$currentMenuElement[0]),e>0&&(i.$inheritedMenus.css("visibility","hidden"),n.children(i.o.menuSelector).css("visibility","visible"))},i.loadContent=function(t,o){var l=e("<span/>",{"class":i.o.classNames.loadingClass}).html("&nbsp;"),s='<div style="clear:both"></div>';i.o.loadContainer.length>0&&t.length>0&&e.inArray(o,i.o.excludeUri)<0&&location.origin+o!==n.location.href&&(i.o.beforeLoad&&"function"==typeof i.o.beforeLoad?i.o.beforeLoad.apply(t):t.html(l).append(s),e.ajax({url:o,type:"get"}).done(function(e){t.html(e+s),i.changeTitle(),i.changeUri(o),i.o.afterLoadDone&&"function"==typeof i.o.afterLoadDone&&i.o.afterLoadDone.apply(t),i.$waSlideMenu.trigger("afterLoadDone."+i.o.namespace+a)}).fail(function(){i.$currentMenuElement.siblings().children("."+i.o.classNames.menuItemBackClass).trigger("click"),i.o.afterLoadFail&&"function"==typeof i.o.afterLoadFail&&i.o.afterLoadFail.apply(t),i.$waSlideMenu.trigger("afterLoadFail."+i.o.namespace+a)}).always(function(){i.o.afterLoadAlways&&"function"==typeof i.o.afterLoadAlways&&i.o.afterLoadAlways.apply(t),i.$waSlideMenu.trigger("afterLoadAlways."+i.o.namespace+a)}))},i.changeTitle=function(){i.o.setTitle&&e("title").text(i.$currentMenuElement.children("a").text())},i.changeUri=function(e){n.history&&history.pushState&&n.history.pushState({},"",e)},i._menuItemClicked=function(n,t,o){if(t.preventDefault(),t.stopPropagation(),i.o.nowSliding)return!1;i.$currentMenuElement=e(n).parent(i.o.itemSelector);var l=e(n).attr("href"),s=i.$currentMenuElement.children(i.o.menuSelector),r=i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass)?!0:!1,c=e(i.o.loadContainer);i.$waSlideMenu.find(i.o.itemSelector).filter("."+i.o.selectedClass).removeClass(i.o.selectedClass),r&&(i.$currentMenuElement=i.$currentMenuElement.closest(i.o.menuSelector).closest(i.o.itemSelector)),i.$currentMenuElement.addClass(i.o.selectedClass),i.o.loadOnlyLatest===!1?i.loadContent(c,l):i.o.loadOnlyLatest&&0===s.length&&o>0&&i.loadContent(c,l),0===s.length&&o>0&&(i.o.onLatestClick&&"function"==typeof i.o.onLatestClick&&i.o.onLatestClick.apply(n),i.$waSlideMenu.trigger("onLatestClick."+i.o.namespace+a)),(s.length>0||0>o)&&i.gotoSelected(o,!0)},i._menuDown=function(e){i._menuItemClicked(this,e,1)},i._menuUp=function(e){i._menuItemClicked(this,e,-1)},i._remove=function(){i.$items.off("click","a",i._menuDown),i.$waSlideMenu.removeClass(i.o.classNames.navigationClass),i.o.autoHeightMenu&&i.$waSlideMenu.css("height","initial"),i.o.minHeightMenu>0&&i.$waSlideMenu.css("min-height","initial"),i.$rootMenu.removeClass(i.o.classNames.allMenusClass).prependTo(i.$waSlideMenu),i.$inheritedMenus.removeClass(i.o.classNames.allMenusClass+" "+i.o.classNames.inheritedMenuClass),i.$inheritedMenus.css("visibility",""),e.each(i.$backs,function(e,n){n.remove()}),i.$movable.remove(),i.$waSlideMenu.removeData(a)},i.exec=function(e){i.hasOwnProperty(e)&&"function"==typeof i[e]&&i[e].call()},i.destroy=function(){i._remove()},i.init=function(){i._setup(),e.each(i.$backs,function(e,n){n.on("click","a",i._menuUp)}),i.$items.on("click","a",i._menuDown),n.history&&history.pushState&&(n.onpopstate=function(e){e&&e.state&&location.reload()});var t=i.$waSlideMenu.find("."+i.o.selectedClass).first();if(t.length){i.$currentMenuElement=t;var o=i.$currentMenuElement.children("a").first(),l=t.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector).length,s=t.children(i.o.menuSelector).length;e.inArray(o.attr("href"),i.o.excludeUri)<0&&(s>0&&(l+=1),i.gotoSelected(l,!1),i._heightFix(s))}i.o.onInit&&"function"==typeof i.o.onInit&&i.o.onInit(i),i.$waSlideMenu.trigger("onInit."+i.o.namespace+a)};var l=e(t).data(a);"object"==typeof l?e.each(o,function(e,n){"function"==typeof l[e]?l[e](n):l.o.hasOwnProperty(e)&&(l.o[e]=n)}):i.init()},e.waSlideMenu.defaults={namespace:"wa",slideSpeed:400,slideEasing:"linear",backLinkContent:"Back",backOnTop:!1,selectedClass:"selected",loadContainer:"",minHeightMenu:0,autoHeightMenu:!0,excludeUri:["/","#"],loadOnlyLatest:!1,menuSelector:"ul",itemSelector:"li",setTitle:!1,scrollToTopSpeed:0,onInit:null,onSlideForward:null,onSlideBack:null,onLatestClick:null,afterSlide:null,beforeLoad:null,afterLoadAlways:null,afterLoadDone:null,afterLoadFail:null,classNames:{navigationClass:"-nav",wrapperClass:"-wrapper",allMenusClass:"-menu",inheritedMenuClass:"-inheritedmenu",menuItemBackClass:"-back",loadingClass:"-loading"}},e.fn.waSlideMenu=function(n,t){return this.each(function(){var o;"object"!=typeof n&&"undefined"!=typeof t?(o={},o[n]=t):o=n;new e.waSlideMenu(this,o)})}}(jQuery,window,document);