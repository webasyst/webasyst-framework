/**
 * waSlideMenu - jQuery plugin for menu organization like Facebook Help Page.
 * @version v1.0.4
 * @link https://github.com/webasyst/waslidemenu
 * @license MIT
 */
!function(e,t){"use strict";e.waSlideMenu=function(n,a){var o="SlideMenu",i=this;i.addCssNamespace=function(t,n){var a={};return e.each(t,function(e,t){"string"==typeof t&&(a[e]=n+o+t)}),a},i.setup=function(){i.o=e.extend({},e.waSlideMenu.defaults,a),i.o.classNames=i.addCssNamespace(i.o.classNames,i.o.namespace),i.$waSlideMenu=e(n),i.$waSlideMenu.data(o,i),i.$backs=[],i.$items=i.$waSlideMenu.find(i.o.itemSelector),i.$waSlideMenu.addClass(i.o.classNames.navigationClass),i.$movable=e("<div/>",{"class":i.o.classNames.wrapperClass}),i.$inheritedMenus=i.$waSlideMenu.find(i.o.menuSelector),i.$rootMenu=e(i.$inheritedMenus.splice(0,1)),i.$rootMenu.addClass(i.o.classNames.allMenusClass).appendTo(i.$movable.prependTo(i.$waSlideMenu)),i.$inheritedMenus.addClass(i.o.classNames.allMenusClass+" "+i.o.classNames.inheritedMenuClass);var t=i.$items.prop("tagName");i.$inheritedMenus.each(function(n,a){var o=e(a).closest(i.o.itemSelector).children("a").attr("href"),l=e("<"+t+"/>",{"class":i.o.classNames.menuItemBackClass});i.o.backOnTop?l.prependTo(e(a)):l.appendTo(e(a)),i.$backs.push(l.append(e("<a>",{href:o}).html(i.o.backLinkContent)))}),i.o.minimumHeight>0&&(i.o.minimumHeight=i.o.minimumHeight>i.$waSlideMenu.height()?i.o.minimumHeight:i.$waSlideMenu.height(),i.$waSlideMenu.css("min-height",i.o.minimumHeight)),i.o.previousHeight=0},i.gotoSelected=function(e,t){i.hideOtherMenus(e,i.scrollToTop),i.heightFix(e),i.animateSlide(e,t)},i.animateSlide=function(e,t){var n=Math.abs(100*e),a=e>0?i.o.onSlideForward:i.o.onSlideBack;a&&"function"==typeof a&&a(i),t?i.$movable.animate({left:e>0?"-="+n+"%":"+="+n+"%"},i.o.slideSpeed,i.o.slideEasing,function(){i.scrollToTop(e),i.o.afterSlide&&"function"==typeof i.o.afterSlide&&i.o.afterSlide(i)}):i.$movable.css("left","-"+n+"%")},i.scrollToTop=function(n){var a=i.$currentMenuElement.children(i.o.menuSelector),o=i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass)?!0:!1;if(i.o.scrollToTopSpeed&&(o||a.length>0)){var l=n>0?a.children(i.o.itemSelector).last():i.$currentMenuElement,s=n>0?l.closest(i.o.menuSelector):i.$currentMenuElement,r=l.offset().top,c=e(t).scrollTop();0>r-c&&e("html, body").animate({scrollTop:s.offset().top},i.o.scrollToTopSpeed)}},i.heightFix=function(e){if(i.o.autoHeight){var t=0,n=0;e>0?(n=i.$currentMenuElement.offset().top-i.$waSlideMenu.offset().top+i.$currentMenuElement.outerHeight(),t=i.$currentMenuElement.children(i.o.menuSelector).height(),t=n>t?t=n:t):t=i.$currentMenuElement.closest(i.o.menuSelector).height(),0>e&&(t=t>i.o.previousHeight?t:i.o.previousHeight),t=t>i.o.minimumHeight?t:i.o.minimumHeight,i.o.previousHeight=t,i.$waSlideMenu.css("height",t)}},i.hideOtherMenus=function(e){var t=i.$currentMenuElement.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector);t.push(i.$currentMenuElement[0]),e>0&&(i.$inheritedMenus.css("visibility","hidden"),t.children(i.o.menuSelector).css("visibility","visible"))},i.loadContent=function(t,n){var a=e("<span/>",{"class":i.o.classNames.loadingClass}).html("&nbsp;"),l='<div style="clear:both"></div>';t.html(a).append(l),e.ajax({url:n,type:"get"}).done(function(e){t.html(e+l),i.changeTitle(),i.changeUri(n),i.o.afterLoadDone&&"function"==typeof i.o.afterLoadDone&&i.o.afterLoadDone(i),i.$waSlideMenu.trigger("afterLoadDone."+i.o.namespace+o)}).fail(function(){i.$currentMenuElement.siblings().children("."+i.o.classNames.menuItemBackClass).trigger("click"),i.o.afterLoadFail&&"function"==typeof i.o.afterLoadFail&&i.o.afterLoadFail(i),i.$waSlideMenu.trigger("afterLoadFail."+i.o.namespace+o)}).always(function(){i.o.afterLoadAlways&&"function"==typeof i.o.afterLoadAlways&&i.o.afterLoadAlways(i),i.$waSlideMenu.trigger("afterLoadAlways."+i.o.namespace+o)})},i.changeTitle=function(){i.o.setTitle&&e("title").text(i.$currentMenuElement.children("a").text())},i.changeUri=function(e){t.history&&history.pushState&&t.history.pushState({},"",e)},i.init=function(){i.setup(),e.each(i.$backs,function(e,t){t.on("click","a",function(e){i.menuItemClicked(this,e,-1)})}),i.$items.on("click","a",function(e){i.menuItemClicked(this,e,1)}),t.history&&history.pushState&&(t.onpopstate=function(e){e&&e.state&&location.reload()});var n=i.$waSlideMenu.find("."+i.o.selectedClass).first();if(n.length){i.$currentMenuElement=n;var a=i.$currentMenuElement.children("a").first(),l=n.parentsUntil("."+i.o.classNames.navigationClass).filter(i.o.itemSelector).length,s=n.children(i.o.menuSelector).length;e.inArray(a.attr("href"),i.o.excludeUri)<0&&(s>0&&(l+=1),i.gotoSelected(l,!1),i.heightFix(s))}i.o.onInit&&"function"==typeof i.o.onInit&&i.o.onInit(i),i.$waSlideMenu.trigger("onInit."+i.o.namespace+o)},i.menuItemClicked=function(n,a,o){a.preventDefault(),a.stopPropagation(),i.$currentMenuElement=e(n).parent(i.o.itemSelector);var l=e(n).attr("href"),s=i.$currentMenuElement.children(i.o.menuSelector),r=i.$currentMenuElement.hasClass(i.o.classNames.menuItemBackClass)?!0:!1,c=e(i.o.loadSelector);i.$waSlideMenu.find(i.o.itemSelector).filter("."+i.o.selectedClass).removeClass(i.o.selectedClass),r&&(i.$currentMenuElement=i.$waSlideMenu.find("[href='"+l+"']:first").parent(i.o.itemSelector)),i.$currentMenuElement.addClass(i.o.selectedClass),i.o.loadSelector.length>0&&c.length>0&&e.inArray(l,i.o.exludeUri)<0&&location.origin+l!==t.location.href&&(i.o.loadOnlyLatest===!1?i.loadContent(c,l):i.o.loadOnlyLatest&&0===s.length&&o>0&&i.loadContent(c,l)),(s.length>0||0>o)&&i.gotoSelected(o,!0)};var l=e(n).data(o);"object"==typeof l?e.each(a,function(e,t){"function"==typeof l[e]?l[e](t):l[e]=t}):i.init()},e.waSlideMenu.defaults={namespace:"wa",slideSpeed:400,slideEasing:"linear",backLinkContent:"Back",backOnTop:!1,selectedClass:"selected",loadSelector:"",minimumHeight:0,autoHeight:!0,excludeUri:["/","#"],loadOnlyLatest:!1,menuSelector:"ul",itemSelector:"li",setTitle:!1,scrollToTopSpeed:0,onInit:null,onSlideForward:null,onSlideBack:null,afterSlide:null,afterLoadAlways:null,afterLoadDone:null,afterLoadFail:null,classNames:{navigationClass:"-nav",wrapperClass:"-wrapper",allMenusClass:"-menu",inheritedMenuClass:"-inheritedmenu",menuItemBackClass:"-back",loadingClass:"-loading"}},e.fn.waSlideMenu=function(t,n){return this.each(function(){var a;"object"!=typeof t&&"undefined"!=typeof n?(a={},a[t]=n):a=t;new e.waSlideMenu(this,a)})}}(jQuery,window,document);