{function render_item b=[]}
    <li>
        {if !empty($b['blocks'])}
            <div class="item dropdown extra-dropdown" data-tag="{$b.tags[0]}">
                <div class="dropdown-toggle">
                    {if !empty($b.app_icon)}
                        <img src="{$wa_url}{$b.app_icon}" class="app_icon icon" alt="">
                    {elseif !empty($b.icon)}
                        <span class="icon"><i class="fas fa-{$b.icon}"></i></span>
                    {/if}
                    {$b.title|escape}
                    <span class="icon icon-spec"><i class="fas fa-angle-right"></i></span>
                </div>
                <div class="dropdown-body">
                    <ul class="menu">
                        {foreach $b['blocks'] as $b2}
                            {render_item b=$b2}
                        {/foreach}
                    </ul>
                </div>
            </div>
        {else}
            <a href="javascript:void(0)" data-type-id="{$b.id|escape}">
                {if !empty($b.app_icon)}
                    <img src="{$wa_url}{$b.app_icon}" class="app_icon icon" alt="">
                {elseif !empty($b.icon)}
                    <span class="icon"><i class="fas fa-{$b.icon}"></i></span>
                {/if}
                {$b.title|escape}
            </a>
        {/if}
    </li>
{/function}

<ul class="menu js-list-of-elements">
    {foreach $library as $b}
        {render_item b=$b}
    {/foreach}
</ul>
